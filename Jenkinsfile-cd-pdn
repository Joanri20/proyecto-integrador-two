    node {
        stage('Checkout') {
            git 'https://github.com/Joanri20/proyecto-integrador-two.git'
        }

        stage('Install dependencies') {
            powershell 'mvn clean install'
        }

        stage('Compile') {
            powershell 'mvn compile'
        }

        stage('Unit and Integration Tests') {
            powershell 'mvn test'
        }

        stage('Build Artifact') {
            powershell 'mvn package'
        }

        stage('Pruebas Performance') {
                    powershell 'echo "Realizando pruebas de performance"'
                    powershell 'timeout /t 2'
                    powershell 'echo "Realizando prueba de estres: 30%"'
                    powershell 'timeout /t 2'
                    powershell 'echo "Realizando prueba de estres: 77%"'
                    powershell 'timeout /t 2'
                    powershell 'echo "Realizando prueba de estres: 95%"'
                    powershell 'timeout /t 1'
                    powershell 'echo "Analisis de pruebas 100%"'
        }

        stage('Pruebas E2E') {
            powershell 'echo "Analizando pruebas E2E..."'
            powershell 'timeout /t 2'
            powershell 'echo "Porcentaje de analisis: 25%"'
            powershell 'timeout /t 2'
            powershell 'echo "Porcentaje de analisis: 55%"'
            powershell 'timeout /t 2'
            powershell 'echo "Porcentaje de analisis: 98%"'
            powershell 'timeout /t 1'
            powershell 'echo "Analisis de pruebas 100%"'
        }

        stage('Aprobación Manual Despliegue') {
            powershell 'echo "Se requiere una aprobación del Lider técnico o PO"'
            powershell 'echo "¿Desea continuar con el despliegue?"'
            powershell 'pause'
            powershell 'echo "Aprobacion aceptada"'
        }


        stage('Deploy PDN') {
            powershell 'echo "Iniciando despliegue..."'
            powershell '''
                if (docker ps -a -f name=proyectointegradortwo) {
                    docker stop proyectointegradortwo
                    docker rm proyectointegradortwo
                }

                docker build -t proyectointegradortwo .
                docker run -d -p 8083:80 --name proyectointegradortwo proyectointegradortwo
            '''
        }

    }